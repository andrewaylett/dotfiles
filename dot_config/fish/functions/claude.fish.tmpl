function claude --description 'Launch Claude Code with theme matching macOS appearance' --wraps claude
    set -l theme light
    if defaults read -g AppleInterfaceStyle &>/dev/null
        set theme dark
    end

    set -l config_file ~/.claude.json
    if test -f $config_file
        jq --arg t $theme '.theme = $t' $config_file >$config_file.tmp
            and mv $config_file.tmp $config_file
    end

    fnox exec -- {{ .brew.prefix }}/bin/claude $argv
end
